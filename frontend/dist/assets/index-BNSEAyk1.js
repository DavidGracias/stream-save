import{r as e,j as t,T as r,M as n,B as o,A as a,a as s,b as i,C as l,c as d,d as c,R as u,e as h,D as p,H as m,E as x,S as f,f as g,g as b,h as y,i as v,k as j,I as w,l as C,V as S,m as R,n as E,o as k,p as F,q as I,s as $,t as D,u as L,v as M,w as B,L as T,x as P,y as W,z as A,F as O,G as _,J as U,K as N,N as z,O as H,P as Y,Q as J,U as G,W as q,X as K,Y as V,Z as X,_ as Q,$ as Z,a0 as ee,a1 as te,a2 as re,a3 as ne,a4 as oe,a5 as ae,a6 as se,a7 as ie,a8 as le,a9 as de,aa as ce,ab as ue,ac as he}from"./ui-CWH-EIYF.js";import{a as pe,g as me}from"./vendor-QYCSsVv3.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var xe,fe={};const ge=me(function(){if(xe)return fe;xe=1;var e=pe();return fe.createRoot=e.createRoot,fe.hydrateRoot=e.hydrateRoot,fe}());
/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var be="popstate";function ye(e={}){return function(e,t,r,n={}){let{window:o=document.defaultView,v5Compat:a=!1}=n,s=o.history,i="POP",l=null,d=c();null==d&&(d=0,s.replaceState({...s.state,idx:d},""));function c(){return(s.state||{idx:null}).idx}function u(){i="POP";let e=c(),t=null==e?null:e-d;d=e,l&&l({action:i,location:x.location,delta:t})}function h(e,t){i="PUSH";let r=Ce(x.location,e,t);d=c()+1;let n=we(r,d),u=x.createHref(r);try{s.pushState(n,"",u)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;o.location.assign(u)}a&&l&&l({action:i,location:x.location,delta:1})}function p(e,t){i="REPLACE";let r=Ce(x.location,e,t);d=c();let n=we(r,d),o=x.createHref(r);s.replaceState(n,"",o),a&&l&&l({action:i,location:x.location,delta:0})}function m(e){return function(e,t=!1){let r="http://localhost";"undefined"!=typeof window&&(r="null"!==window.location.origin?window.location.origin:window.location.href);ve(r,"No window.location.(origin|href) available to create URL");let n="string"==typeof e?e:Se(e);n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n);return new URL(n,r)}(e)}let x={get action(){return i},get location(){return e(o,s)},listen(e){if(l)throw new Error("A history only accepts one active listener");return o.addEventListener(be,u),l=e,()=>{o.removeEventListener(be,u),l=null}},createHref:e=>t(o,e),createURL:m,encodeLocation(e){let t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:h,replace:p,go:e=>s.go(e)};return x}(function(e,t){let{pathname:r,search:n,hash:o}=e.location;return Ce("",{pathname:r,search:n,hash:o},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:Se(t)},0,e)}function ve(e,t){if(!1===e||null==e)throw new Error(t)}function je(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function we(e,t){return{usr:e.state,key:e.key,idx:t}}function Ce(e,t,r=null,n){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?Re(t):t,state:r,key:t&&t.key||n||Math.random().toString(36).substring(2,10)}}function Se({pathname:e="/",search:t="",hash:r=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),r&&"#"!==r&&(e+="#"===r.charAt(0)?r:"#"+r),e}function Re(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function Ee(e,t,r="/"){return function(e,t,r,n){let o="string"==typeof t?Re(t):t,a=_e(o.pathname||"/",r);if(null==a)return null;let s=ke(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let i=null;for(let l=0;null==i&&l<s.length;++l){let e=Oe(a);i=We(s[l],e,n)}return i}(e,t,r,!1)}function ke(e,t=[],r=[],n=""){let o=(e,o,a)=>{let s={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};s.relativePath.startsWith("/")&&(ve(s.relativePath.startsWith(n),`Absolute route path "${s.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),s.relativePath=s.relativePath.slice(n.length));let i=He([n,s.relativePath]),l=r.concat(s);e.children&&e.children.length>0&&(ve(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${i}".`),ke(e.children,t,l,i)),(null!=e.path||e.index)&&t.push({path:i,score:Pe(i,e.index),routesMeta:l})};return e.forEach((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let r of Fe(e.path))o(e,t,r);else o(e,t)}),t}function Fe(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,o=r.endsWith("?"),a=r.replace(/\?$/,"");if(0===n.length)return o?[a,""]:[a];let s=Fe(n.join("/")),i=[];return i.push(...s.map(e=>""===e?a:[a,e].join("/"))),o&&i.push(...s),i.map(t=>e.startsWith("/")&&""===t?"/":t)}var Ie=/^:[\w-]+$/,$e=3,De=2,Le=1,Me=10,Be=-2,Te=e=>"*"===e;function Pe(e,t){let r=e.split("/"),n=r.length;return r.some(Te)&&(n+=Be),t&&(n+=De),r.filter(e=>!Te(e)).reduce((e,t)=>e+(Ie.test(t)?$e:""===t?Le:Me),n)}function We(e,t,r=!1){let{routesMeta:n}=e,o={},a="/",s=[];for(let i=0;i<n.length;++i){let e=n[i],l=i===n.length-1,d="/"===a?t:t.slice(a.length)||"/",c=Ae({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},d),u=e.route;if(!c&&l&&r&&!n[n.length-1].route.index&&(c=Ae({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},d)),!c)return null;Object.assign(o,c.params),s.push({params:o,pathname:He([a,c.pathname]),pathnameBase:Ye(He([a,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(a=He([a,c.pathnameBase]))}return s}function Ae(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t=!1,r=!0){je("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(n.push({paramName:"*"}),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))");let a=new RegExp(o,t?void 0:"i");return[a,n]}(e.path,e.caseSensitive,e.end),o=t.match(r);if(!o)return null;let a=o[0],s=a.replace(/(.)\/+$/,"$1"),i=o.slice(1);return{params:n.reduce((e,{paramName:t,isOptional:r},n)=>{if("*"===t){let e=i[n]||"";s=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const o=i[n];return e[t]=r&&!o?void 0:(o||"").replace(/%2F/g,"/"),e},{}),pathname:a,pathnameBase:s,pattern:e}}function Oe(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return je(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function _e(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function Ue(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ne(e){let t=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t.map((e,r)=>r===t.length-1?e.pathname:e.pathnameBase)}function ze(e,t,r,n=!1){let o;"string"==typeof e?o=Re(e):(o={...e},ve(!o.pathname||!o.pathname.includes("?"),Ue("?","pathname","search",o)),ve(!o.pathname||!o.pathname.includes("#"),Ue("#","pathname","hash",o)),ve(!o.search||!o.search.includes("#"),Ue("#","search","hash",o)));let a,s=""===e||""===o.pathname,i=s?"/":o.pathname;if(null==i)a=r;else{let e=t.length-1;if(!n&&i.startsWith("..")){let t=i.split("/");for(;".."===t[0];)t.shift(),e-=1;o.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e,t="/"){let{pathname:r,search:n="",hash:o=""}="string"==typeof e?Re(e):e,a=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:a,search:Je(n),hash:Ge(o)}}(o,a),d=i&&"/"!==i&&i.endsWith("/"),c=(s||"."===i)&&r.endsWith("/");return l.pathname.endsWith("/")||!d&&!c||(l.pathname+="/"),l}var He=e=>e.join("/").replace(/\/\/+/g,"/"),Ye=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Je=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Ge=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var qe=["POST","PUT","PATCH","DELETE"];new Set(qe);var Ke=["GET",...qe];new Set(Ke);var Ve=e.createContext(null);Ve.displayName="DataRouter";var Xe=e.createContext(null);Xe.displayName="DataRouterState",e.createContext(!1);var Qe=e.createContext({isTransitioning:!1});Qe.displayName="ViewTransition",e.createContext(new Map).displayName="Fetchers",e.createContext(null).displayName="Await";var Ze=e.createContext(null);Ze.displayName="Navigation";var et=e.createContext(null);et.displayName="Location";var tt=e.createContext({outlet:null,matches:[],isDataRoute:!1});tt.displayName="Route";var rt=e.createContext(null);function nt(){return null!=e.useContext(et)}function ot(){return ve(nt(),"useLocation() may be used only in the context of a <Router> component."),e.useContext(et).location}rt.displayName="RouteError";var at="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function st(t){e.useContext(Ze).static||e.useLayoutEffect(t)}function it(){let{isDataRoute:t}=e.useContext(tt);return t?function(){let{router:t}=function(t){let r=e.useContext(Ve);return ve(r,mt(t)),r}("useNavigate"),r=xt("useNavigate"),n=e.useRef(!1);return st(()=>{n.current=!0}),e.useCallback(async(e,o={})=>{je(n.current,at),n.current&&("number"==typeof e?t.navigate(e):await t.navigate(e,{fromRouteId:r,...o}))},[t,r])}():function(){ve(nt(),"useNavigate() may be used only in the context of a <Router> component.");let t=e.useContext(Ve),{basename:r,navigator:n}=e.useContext(Ze),{matches:o}=e.useContext(tt),{pathname:a}=ot(),s=JSON.stringify(Ne(o)),i=e.useRef(!1);return st(()=>{i.current=!0}),e.useCallback((e,o={})=>{if(je(i.current,at),!i.current)return;if("number"==typeof e)return void n.go(e);let l=ze(e,JSON.parse(s),a,"path"===o.relative);null==t&&"/"!==r&&(l.pathname="/"===l.pathname?r:He([r,l.pathname])),(o.replace?n.replace:n.push)(l,o.state,o)},[r,n,s,a,t])}()}function lt(t,{relative:r}={}){let{matches:n}=e.useContext(tt),{pathname:o}=ot(),a=JSON.stringify(Ne(n));return e.useMemo(()=>ze(t,JSON.parse(a),o,"path"===r),[t,a,o,r])}function dt(t,r,n,o){ve(nt(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=e.useContext(Ze),{matches:s}=e.useContext(tt),i=s[s.length-1],l=i?i.params:{},d=i?i.pathname:"/",c=i?i.pathnameBase:"/",u=i&&i.route;{let e=u&&u.path||"";gt(d,!u||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let h,p=ot();if(r){let e="string"==typeof r?Re(r):r;ve("/"===c||e.pathname?.startsWith(c),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${e.pathname}" was given in the \`location\` prop.`),h=e}else h=p;let m=h.pathname||"/",x=m;if("/"!==c){let e=c.replace(/^\//,"").split("/");x="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let f=Ee(t,{pathname:x});je(u||null!=f,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),je(null==f||void 0!==f[f.length-1].route.element||void 0!==f[f.length-1].route.Component||void 0!==f[f.length-1].route.lazy,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=function(t,r=[],n=null){if(null==t){if(!n)return null;if(n.errors)t=n.matches;else{if(0!==r.length||n.initialized||!(n.matches.length>0))return null;t=n.matches}}let o=t,a=n?.errors;if(null!=a){let e=o.findIndex(e=>e.route.id&&void 0!==a?.[e.route.id]);ve(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,e+1))}let s=!1,i=-1;if(n)for(let e=0;e<o.length;e++){let t=o[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(i=e),t.route.id){let{loaderData:e,errors:r}=n,a=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!r||void 0===r[t.route.id]);if(t.route.lazy||a){s=!0,o=i>=0?o.slice(0,i+1):[o[0]];break}}}return o.reduceRight((t,l,d)=>{let c,u=!1,h=null,p=null;n&&(c=a&&l.route.id?a[l.route.id]:void 0,h=l.route.errorElement||ut,s&&(i<0&&0===d?(gt("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),u=!0,p=null):i===d&&(u=!0,p=l.route.hydrateFallbackElement||null)));let m=r.concat(o.slice(0,d+1)),x=()=>{let r;return r=c?h:u?p:l.route.Component?e.createElement(l.route.Component,null):l.route.element?l.route.element:t,e.createElement(pt,{match:l,routeContext:{outlet:t,matches:m,isDataRoute:null!=n},children:r})};return n&&(l.route.ErrorBoundary||l.route.errorElement||0===d)?e.createElement(ht,{location:n.location,revalidation:n.revalidation,component:h,error:c,children:x(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):x()},null)}(f&&f.map(e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:He([c,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:He([c,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),s,n,o);return r&&g?e.createElement(et.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},g):g}function ct(){let t=function(){let t=e.useContext(rt),r=function(t){let r=e.useContext(Xe);return ve(r,mt(t)),r}("useRouteError"),n=xt("useRouteError");if(void 0!==t)return t;return r.errors?.[n]}(),r=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,o="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:o},s={padding:"2px 4px",backgroundColor:o},i=null;return console.error("Error handled by React Router default ErrorBoundary:",t),i=e.createElement(e.Fragment,null,e.createElement("p",null,"💿 Hey developer 👋"),e.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",e.createElement("code",{style:s},"ErrorBoundary")," or"," ",e.createElement("code",{style:s},"errorElement")," prop on your route.")),e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},r),n?e.createElement("pre",{style:a},n):null,i)}e.createContext(null);var ut=e.createElement(ct,null),ht=class extends e.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?e.createElement(tt.Provider,{value:this.props.routeContext},e.createElement(rt.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function pt({routeContext:t,match:r,children:n}){let o=e.useContext(Ve);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(tt.Provider,{value:t},n)}function mt(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xt(t){let r=function(t){let r=e.useContext(tt);return ve(r,mt(t)),r}(t),n=r.matches[r.matches.length-1];return ve(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}var ft={};function gt(e,t,r){t||ft[e]||(ft[e]=!0,je(!1,r))}function bt({to:t,replace:r,state:n,relative:o}){ve(nt(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=e.useContext(Ze);je(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=e.useContext(tt),{pathname:i}=ot(),l=it(),d=ze(t,Ne(s),i,"path"===o),c=JSON.stringify(d);return e.useEffect(()=>{l(JSON.parse(c),{replace:r,state:n,relative:o})},[l,c,o,r,n]),null}function yt(e){ve(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vt({basename:t="/",children:r=null,location:n,navigationType:o="POP",navigator:a,static:s=!1}){ve(!nt(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=t.replace(/^\/*/,"/"),l=e.useMemo(()=>({basename:i,navigator:a,static:s,future:{}}),[i,a,s]);"string"==typeof n&&(n=Re(n));let{pathname:d="/",search:c="",hash:u="",state:h=null,key:p="default"}=n,m=e.useMemo(()=>{let e=_e(d,i);return null==e?null:{location:{pathname:e,search:c,hash:u,state:h,key:p},navigationType:o}},[i,d,c,u,h,p,o]);return je(null!=m,`<Router basename="${i}"> is not able to match the URL "${d}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),null==m?null:e.createElement(Ze.Provider,{value:l},e.createElement(et.Provider,{children:r,value:m}))}function jt({children:e,location:t}){return dt(wt(e),t)}function wt(t,r=[]){let n=[];return e.Children.forEach(t,(t,o)=>{if(!e.isValidElement(t))return;let a=[...r,o];if(t.type===e.Fragment)return void n.push.apply(n,wt(t.props.children,a));ve(t.type===yt,`[${"string"==typeof t.type?t.type:t.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ve(!t.props.index||!t.props.children,"An index route cannot have child routes.");let s={id:t.props.id||a.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,hydrateFallbackElement:t.props.hydrateFallbackElement,HydrateFallback:t.props.HydrateFallback,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:!0===t.props.hasErrorBoundary||null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(s.children=wt(t.props.children,a)),n.push(s)}),n}e.memo(function({routes:e,future:t,state:r}){return dt(e,void 0,r,t)});var Ct="get",St="application/x-www-form-urlencoded";function Rt(e){return null!=e&&"string"==typeof e.tagName}var Et=null;var kt=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ft(e){return null==e||kt.has(e)?e:(je(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${St}"`),null)}function It(e,t){let r,n,o,a,s;if(Rt(i=e)&&"form"===i.tagName.toLowerCase()){let s=e.getAttribute("action");n=s?_e(s,t):null,r=e.getAttribute("method")||Ct,o=Ft(e.getAttribute("enctype"))||St,a=new FormData(e)}else if(function(e){return Rt(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Rt(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let i=e.getAttribute("formaction")||s.getAttribute("action");if(n=i?_e(i,t):null,r=e.getAttribute("formmethod")||s.getAttribute("method")||Ct,o=Ft(e.getAttribute("formenctype"))||Ft(s.getAttribute("enctype"))||St,a=new FormData(s,e),!function(){if(null===Et)try{new FormData(document.createElement("form"),0),Et=!1}catch(e){Et=!0}return Et}()){let{name:t,type:r,value:n}=e;if("image"===r){let e=t?`${t}.`:"";a.append(`${e}x`,"0"),a.append(`${e}y`,"0")}else t&&a.append(t,n)}}else{if(Rt(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Ct,n=null,o=St,s=e}var i;return a&&"text/plain"===o&&(s=a,a=void 0),{action:n,method:r.toLowerCase(),encType:o,formData:a,body:s}}function $t(e,t){if(!1===e||null==e)throw new Error(t)}function Dt(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}async function Lt(e,t,r){return function(e,t){let r=new Set;return new Set(t),e.reduce((e,t)=>{let n=JSON.stringify(function(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}(t));return r.has(n)||(r.add(n),e.push({key:n,link:t})),e},[])}((await Promise.all(e.map(async e=>{let n=t.routes[e.route.id];if(n){let e=await async function(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}(n,r);return e.links?e.links():[]}return[]}))).flat(1).filter(Dt).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}function Mt(e,t,r,n,o,a){let s=(e,t)=>!r[t]||e.route.id!==r[t].route.id,i=(e,t)=>r[t].pathname!==e.pathname||r[t].route.path?.endsWith("*")&&r[t].params["*"]!==e.params["*"];return"assets"===a?t.filter((e,t)=>s(e,t)||i(e,t)):"data"===a?t.filter((t,a)=>{let l=n.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(s(t,a)||i(t,a))return!0;if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof n)return n}return!0}):[]}function Bt(e,t,{includeHydrateFallback:r}={}){return n=e.map(e=>{let n=t.routes[e.route.id];if(!n)return[];let o=[n.module];return n.clientActionModule&&(o=o.concat(n.clientActionModule)),n.clientLoaderModule&&(o=o.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(o=o.concat(n.hydrateFallbackModule)),n.imports&&(o=o.concat(n.imports)),o}).flat(1),[...new Set(n)];var n}function Tt(){let t=e.useContext(Ve);return $t(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Pt=e.createContext(void 0);function Wt(){let t=e.useContext(Pt);return $t(t,"You must render this element inside a <HydratedRouter> element"),t}function At(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function Ot({page:t,...r}){let{router:n}=Tt(),o=e.useMemo(()=>Ee(n.routes,t,n.basename),[n.routes,t,n.basename]);return o?e.createElement(_t,{page:t,matches:o,...r}):null}function _t({page:t,matches:r,...n}){let o=ot(),{manifest:a,routeModules:s}=Wt(),{basename:i}=Tt(),{loaderData:l,matches:d}=function(){let t=e.useContext(Xe);return $t(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}(),c=e.useMemo(()=>Mt(t,r,d,a,o,"data"),[t,r,d,a,o]),u=e.useMemo(()=>Mt(t,r,d,a,o,"assets"),[t,r,d,a,o]),h=e.useMemo(()=>{if(t===o.pathname+o.search+o.hash)return[];let e=new Set,n=!1;if(r.forEach(t=>{let r=a.routes[t.route.id];r&&r.hasLoader&&(!c.some(e=>e.route.id===t.route.id)&&t.route.id in l&&s[t.route.id]?.shouldRevalidate||r.hasClientLoader?n=!0:e.add(t.route.id))}),0===e.size)return[];let d=function(e,t,r){let n="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname=`_root.${r}`:t&&"/"===_e(n.pathname,t)?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}(t,i,"data");return n&&e.size>0&&d.searchParams.set("_routes",r.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[d.pathname+d.search]},[i,l,o,a,c,r,t,s]),p=e.useMemo(()=>Bt(u,a),[u,a]),m=function(t){let{manifest:r,routeModules:n}=Wt(),[o,a]=e.useState([]);return e.useEffect(()=>{let e=!1;return Lt(t,r,n).then(t=>{e||a(t)}),()=>{e=!0}},[t,r,n]),o}(u);return e.createElement(e.Fragment,null,h.map(t=>e.createElement("link",{key:t,rel:"prefetch",as:"fetch",href:t,...n})),p.map(t=>e.createElement("link",{key:t,rel:"modulepreload",href:t,...n})),m.map(({key:t,link:r})=>e.createElement("link",{key:t,nonce:n.nonce,...r})))}function Ut(...e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}Pt.displayName="FrameworkContext";var Nt="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{Nt&&(window.__reactRouterVersion="7.8.0")}catch(Ir){}function zt({basename:t,children:r,window:n}){let o=e.useRef();null==o.current&&(o.current=ye({window:n,v5Compat:!0}));let a=o.current,[s,i]=e.useState({action:a.action,location:a.location}),l=e.useCallback(t=>{e.startTransition(()=>i(t))},[i]);return e.useLayoutEffect(()=>a.listen(l),[a,l]),e.createElement(vt,{basename:t,children:r,location:s.location,navigationType:s.action,navigator:a})}var Ht=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yt=e.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:o,reloadDocument:a,replace:s,state:i,target:l,to:d,preventScrollReset:c,viewTransition:u,...h},p){let m,{basename:x}=e.useContext(Ze),f="string"==typeof d&&Ht.test(d),g=!1;if("string"==typeof d&&f&&(m=d,Nt))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),r=_e(t.pathname,x);t.origin===e.origin&&null!=r?d=r+t.search+t.hash:g=!0}catch(Ir){je(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=function(t,{relative:r}={}){ve(nt(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:o}=e.useContext(Ze),{hash:a,pathname:s,search:i}=lt(t,{relative:r}),l=s;return"/"!==n&&(l="/"===s?n:He([n,s])),o.createHref({pathname:l,search:i,hash:a})}(d,{relative:o}),[y,v,j]=function(t,r){let n=e.useContext(Pt),[o,a]=e.useState(!1),[s,i]=e.useState(!1),{onFocus:l,onBlur:d,onMouseEnter:c,onMouseLeave:u,onTouchStart:h}=r,p=e.useRef(null);e.useEffect(()=>{if("render"===t&&i(!0),"viewport"===t){let e=new IntersectionObserver(e=>{e.forEach(e=>{i(e.isIntersecting)})},{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}},[t]),e.useEffect(()=>{if(o){let e=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(e)}}},[o]);let m=()=>{a(!0)},x=()=>{a(!1),i(!1)};return n?"intent"!==t?[s,p,{}]:[s,p,{onFocus:At(l,m),onBlur:At(d,x),onMouseEnter:At(c,m),onMouseLeave:At(u,x),onTouchStart:At(h,m)}]:[!1,p,{}]}(n,h),w=function(t,{target:r,replace:n,state:o,preventScrollReset:a,relative:s,viewTransition:i}={}){let l=it(),d=ot(),c=lt(t,{relative:s});return e.useCallback(e=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(e,r)){e.preventDefault();let r=void 0!==n?n:Se(d)===Se(c);l(t,{replace:r,state:o,preventScrollReset:a,relative:s,viewTransition:i})}},[d,l,c,n,o,r,t,a,s,i])}(d,{replace:s,state:i,target:l,preventScrollReset:c,relative:o,viewTransition:u});let C=e.createElement("a",{...h,...j,href:m||b,onClick:g||a?t:function(e){t&&t(e),e.defaultPrevented||w(e)},ref:Ut(p,v),target:l,"data-discover":f||"render"!==r?void 0:"true"});return y&&!f?e.createElement(e.Fragment,null,C,e.createElement(Ot,{page:b})):C});function Jt(t){let r=e.useContext(Ve);return ve(r,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(t)),r}Yt.displayName="Link",e.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:o=!1,style:a,to:s,viewTransition:i,children:l,...d},c){let u=lt(s,{relative:d.relative}),h=ot(),p=e.useContext(Xe),{navigator:m,basename:x}=e.useContext(Ze),f=null!=p&&function(t,{relative:r}={}){let n=e.useContext(Qe);ve(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=Jt("useViewTransitionState"),a=lt(t,{relative:r});if(!n.isTransitioning)return!1;let s=_e(n.currentLocation.pathname,o)||n.currentLocation.pathname,i=_e(n.nextLocation.pathname,o)||n.nextLocation.pathname;return null!=Ae(a.pathname,i)||null!=Ae(a.pathname,s)}(u)&&!0===i,g=m.encodeLocation?m.encodeLocation(u).pathname:u.pathname,b=h.pathname,y=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(b=b.toLowerCase(),y=y?y.toLowerCase():null,g=g.toLowerCase()),y&&x&&(y=_e(y,x)||y);const v="/"!==g&&g.endsWith("/")?g.length-1:g.length;let j,w=b===g||!o&&b.startsWith(g)&&"/"===b.charAt(v),C=null!=y&&(y===g||!o&&y.startsWith(g)&&"/"===y.charAt(g.length)),S={isActive:w,isPending:C,isTransitioning:f},R=w?t:void 0;j="function"==typeof n?n(S):[n,w?"active":null,C?"pending":null,f?"transitioning":null].filter(Boolean).join(" ");let E="function"==typeof a?a(S):a;return e.createElement(Yt,{...d,"aria-current":R,className:j,ref:c,style:E,to:s,viewTransition:i},"function"==typeof l?l(S):l)}).displayName="NavLink",e.forwardRef(({discover:t="render",fetcherKey:r,navigate:n,reloadDocument:o,replace:a,state:s,method:i=Ct,action:l,onSubmit:d,relative:c,preventScrollReset:u,viewTransition:h,...p},m)=>{let x=function(){let{router:t}=Jt("useSubmit"),{basename:r}=e.useContext(Ze),n=xt("useRouteId");return e.useCallback(async(e,o={})=>{let{action:a,method:s,encType:i,formData:l,body:d}=It(e,r);if(!1===o.navigate){let e=o.fetcherKey||qt();await t.fetch(e,n,o.action||a,{preventScrollReset:o.preventScrollReset,formData:l,body:d,formMethod:o.method||s,formEncType:o.encType||i,flushSync:o.flushSync})}else await t.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:l,body:d,formMethod:o.method||s,formEncType:o.encType||i,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,r,n])}(),f=function(t,{relative:r}={}){let{basename:n}=e.useContext(Ze),o=e.useContext(tt);ve(o,"useFormAction must be used inside a RouteContext");let[a]=o.matches.slice(-1),s={...lt(t||".",{relative:r})},i=ot();if(null==t){s.search=i.search;let e=new URLSearchParams(s.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let r=e.toString();s.search=r?`?${r}`:""}}t&&"."!==t||!a.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(s.pathname="/"===s.pathname?n:He([n,s.pathname]));return Se(s)}(l,{relative:c}),g="get"===i.toLowerCase()?"get":"post",b="string"==typeof l&&Ht.test(l);return e.createElement("form",{ref:m,method:g,action:f,onSubmit:o?d:e=>{if(d&&d(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,o=t?.getAttribute("formmethod")||i;x(t||e.currentTarget,{fetcherKey:r,method:o,navigate:n,replace:a,state:s,relative:c,preventScrollReset:u,viewTransition:h})},...p,"data-discover":b||"render"!==t?void 0:"true"})}).displayName="Form";var Gt=0,qt=()=>`__${String(++Gt)}__`;const Kt={borderColor:"secondary.main",hoverBg:"rgba(253, 121, 168, 0.28)",activeBg:"rgba(255, 255, 255, 0.08)"},Vt={borderColor:"#00BFAE",hoverBg:"rgba(0, 191, 174, 0.1)",activeBg:"rgba(255, 255, 255, 0.08)"},Xt={borderColor:"divider",hoverBg:"rgba(108, 92, 231, 0.1)",activeBg:"transparent"};function Qt(e,t){const r="manage"===t?Kt:"configure"===t?Vt:Xt,n=e&&"home"!==t;return{borderRadius:2,px:3,py:1,fontWeight:600,minWidth:120,justifyContent:"center",border:"home"===t?void 0:n?"2px solid":"2px solid transparent",borderColor:"home"===t?void 0:n?r.borderColor:"transparent",backgroundColor:e?r.activeBg:"transparent","&:hover":{border:"home"===t?void 0:"2px solid",borderColor:"home"===t?void 0:r.borderColor,backgroundColor:r.hoverBg}}}const Zt=({profiles:e,profile:i,hasDbCreds:l=!0,label:d="Profile",size:c="small",setProfile:u,setProfiles:h,sx:p})=>t.jsxs(r,{size:c,label:d,variant:"outlined",select:!0,value:i,onChange:t=>{const r=t.target.value;if("__add__"===r){const t=prompt("Enter new profile name");if(!t?.trim())return;const r=t.trim(),n=Array.from(new Set([...e,r]));return h(n),void u(r)}u(r)},disabled:!l,sx:{minWidth:180,"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#2d2d2d"},"&:hover fieldset":{borderColor:"primary.main"},"&.Mui-focused fieldset":{borderColor:"primary.main"}},...p},SelectProps:{renderValue:e=>e||""},children:[e.map(e=>t.jsx(n,{value:e,children:e},e)),t.jsx(n,{value:"__add__",sx:{whiteSpace:"nowrap"},children:t.jsxs(o,{sx:{display:"inline-flex",alignItems:"center",gap:1,whiteSpace:"nowrap"},children:[t.jsx(a,{fontSize:"small"}),t.jsx(s,{variant:"body2",noWrap:!0,children:"Add profile"})]})})]}),er=({profiles:e,profile:r,hasDbCreds:n,setProfile:a,setProfiles:g})=>{const b=ot(),y=e=>b.pathname===e,v=[{path:"/",label:"Home",icon:t.jsx(m,{})},{path:"/manage",label:"Manage",icon:t.jsx(x,{})},{path:"/configure",label:"Configure",icon:t.jsx(f,{}),customColor:"#666666"}];return t.jsx(i,{position:"static",elevation:0,children:t.jsx(l,{maxWidth:"xl",children:t.jsxs(d,{sx:{minHeight:70},children:[t.jsxs(s,{variant:"h5",component:Yt,to:"/",sx:{flexGrow:1,textDecoration:"none",color:"primary.main",fontWeight:"bold",display:"flex",alignItems:"center",gap:1,"&:hover":{color:"primary.light"}},children:[t.jsx(c,{label:"SS",color:"primary",size:"small",sx:{fontWeight:"bold",fontSize:"0.8rem",backgroundColor:"#6c5ce7",color:"#ffffff"}}),"Stream Save"]}),t.jsxs(o,{sx:{display:"flex",gap:1,alignItems:"center"},children:[v.map((e,r)=>t.jsxs(u.Fragment,{children:[t.jsx(h,{component:Yt,to:e.path,startIcon:e.icon,variant:y(e.path)?"outlined":"text",color:y(e.path)?"primary":"inherit",sx:Qt(y(e.path),"/manage"===e.path?"manage":"/configure"===e.path?"configure":"/"===e.path?"home":"default"),children:e.label}),r<v.length-1&&t.jsx(p,{orientation:"vertical",flexItem:!0,sx:{height:32,borderColor:"rgba(255, 255, 255, 0.12)",mx:.5}})]},e.path)),t.jsx(p,{orientation:"vertical",flexItem:!0,sx:{height:32,borderColor:"rgba(255, 255, 255, 0.12)",mx:1}}),t.jsx(Zt,{profiles:e,profile:r,hasDbCreds:n,setProfile:a,setProfiles:g,size:"medium",sx:{"& .MuiOutlinedInput-root":{height:48,alignItems:"center"},"& .MuiSelect-select":{display:"flex",alignItems:"center",paddingTop:"10px",paddingBottom:"10px"}}})]})]})})})},tr=()=>t.jsxs(o,{textAlign:"center",mb:6,children:[t.jsx(s,{variant:"h2",component:"h1",color:"primary",gutterBottom:!0,sx:{fontWeight:"bold",background:"linear-gradient(45deg, #6c5ce7 30%, #a29bfe 90%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",mb:2},children:"Stream Save"}),t.jsx(s,{variant:"h5",color:"text.secondary",paragraph:!0,sx:{maxWidth:600,mx:"auto"},children:"Save and manage your custom stream links for movies and series in Stremio"})]}),rr=()=>t.jsxs(o,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:3,mb:6,justifyContent:"center"},children:[t.jsx(o,{sx:{flex:{xs:"1",md:"0 1 300px"}},children:t.jsx(h,{component:Yt,to:"/manage",variant:"outlined",color:"secondary",size:"large",fullWidth:!0,startIcon:t.jsx(x,{}),sx:{py:3,fontSize:"1.1rem",borderRadius:3,border:"3px solid",borderColor:"secondary.main",boxShadow:"none","&:hover":{boxShadow:"0 8px 32px rgba(0, 191, 174, 0.2)",transform:"translateY(-2px)",borderColor:"secondary.main"},transition:"all 0.3s ease"},children:"Manage Content"})}),t.jsx(o,{sx:{flex:{xs:"1",md:"0 1 300px"}},children:t.jsx(h,{component:Yt,to:"/configure",variant:"outlined",color:"inherit",size:"large",fullWidth:!0,startIcon:t.jsx(f,{}),sx:{py:3,fontSize:"1.1rem",borderRadius:3,borderWidth:3,borderColor:"#00BFAE",color:"#00BFAE","&:hover":{borderWidth:3,borderColor:"#00BFAE",color:"#00BFAE",transform:"translateY(-2px)",boxShadow:"0 8px 32px rgba(0, 191, 174, 0.2)"},transition:"all 0.3s ease"},children:"First Time Configuration"})})]}),nr=()=>t.jsxs(o,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:3},children:[t.jsx(o,{sx:{flex:1},children:t.jsx(g,{elevation:0,sx:{height:"100%",background:"linear-gradient(135deg, #1a1a2e 0%, #2d2d2d 100%)",border:"1px solid #2d2d2d","&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 40px rgba(108, 92, 231, 0.15)"},transition:"all 0.3s ease"},children:t.jsxs(b,{sx:{textAlign:"center",p:4},children:[t.jsx(o,{sx:{mb:2},children:t.jsx(y,{sx:{fontSize:48,color:"secondary.main"}})}),t.jsx(s,{variant:"h6",color:"secondary",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Manage"}),t.jsx(s,{variant:"body2",color:"text.secondary",children:"Daily use page for adding and removing stream links for movies and series."})]})})}),t.jsx(o,{sx:{flex:1},children:t.jsx(g,{elevation:0,sx:{height:"100%",background:"linear-gradient(135deg, #1a1a2e 0%, #2d2d2d 100%)",border:"1px solid #2d2d2d","&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 40px rgba(108, 92, 231, 0.15)"},transition:"all 0.3s ease"},children:t.jsxs(b,{sx:{textAlign:"center",p:4},children:[t.jsx(o,{sx:{mb:2},children:t.jsx(v,{sx:{fontSize:48,color:"#00BFAE"}})}),t.jsx(s,{variant:"h6",color:"#00BFAE",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Configure"}),t.jsx(s,{variant:"body2",color:"text.secondary",children:"One-time setup for MongoDB connection. Required before adding content."})]})})})]}),or=()=>t.jsxs("div",{style:{padding:"20px"},children:[t.jsx(tr,{}),t.jsx(rr,{}),t.jsx(nr,{})]}),ar=e=>e.user&&e.pass&&e.cluster?`mongodb+srv://${e.user}:${e.pass}@${e.cluster}.mongodb.net`:"",sr=(e,t,r)=>e&&t&&r&&"string"==typeof e&&"string"==typeof t&&"string"==typeof r&&""!==e.trim()&&""!==t.trim()&&""!==r.trim()?`mongodb+srv://${e.trim()}:${t.trim()}@${r.trim()}.mongodb.net`:"",ir=()=>t.jsxs(o,{textAlign:"center",mb:4,children:[t.jsx(s,{variant:"h3",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold",color:"primary.main"},children:"Configure Stream Save"}),t.jsx(s,{variant:"h6",color:"text.secondary",children:"Configure your MongoDB connection for Stream Save"})]}),lr=({formData:e,showPassword:n,setShowPassword:a,onFieldChange:i})=>t.jsxs(o,{children:[t.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:3},children:[t.jsx(j,{sx:{fontSize:32,color:"primary.main",mr:2}}),t.jsx(s,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Enter MongoDB Credentials"})]}),t.jsxs(o,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:3,mb:3},children:[t.jsxs(o,{sx:{flex:1,display:"flex",alignItems:"center",gap:1},children:[t.jsx(o,{sx:{width:16,height:16,backgroundColor:"#87CEEB",borderRadius:1}}),t.jsx(s,{variant:"body2",color:"text.secondary",children:"Username"})]}),t.jsxs(o,{sx:{flex:1,display:"flex",alignItems:"center",gap:1},children:[t.jsx(o,{sx:{width:16,height:16,backgroundColor:"#FFB6C1",borderRadius:1}}),t.jsx(s,{variant:"body2",color:"text.secondary",children:"Password"})]}),t.jsxs(o,{sx:{flex:1,display:"flex",alignItems:"center",gap:1},children:[t.jsx(o,{sx:{width:16,height:16,backgroundColor:"#FFD700",borderRadius:1}}),t.jsx(s,{variant:"body2",color:"text.secondary",children:"Cluster"})]})]}),t.jsxs(o,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:3,mb:4},children:[t.jsx(o,{sx:{flex:1},children:t.jsx(r,{fullWidth:!0,label:"Username",value:e.user,onChange:e=>i("user",e.target.value),placeholder:"Your MongoDB username",variant:"outlined",required:!0,sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#87CEEB"},"&:hover fieldset":{borderColor:"#5F9EA0"},"&.Mui-focused fieldset":{borderColor:"#87CEEB"}},"& .MuiInputLabel-root":{color:"#87CEEB"},"& .MuiInputLabel-root.Mui-focused":{color:"#87CEEB"}}})}),t.jsx(o,{sx:{flex:1},children:t.jsx(r,{fullWidth:!0,label:"Password",type:n?"text":"password",value:e.pass,onChange:e=>i("pass",e.target.value),placeholder:"Your MongoDB Password",variant:"outlined",required:!0,InputProps:{endAdornment:t.jsx(w,{position:"end",children:t.jsx(C,{onClick:()=>a(!n),edge:"end",sx:{color:"#FFB6C1","&:hover":{backgroundColor:"rgba(255, 182, 193, 0.1)"}},children:n?t.jsx(S,{}):t.jsx(R,{})})})},sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#FFB6C1"},"&:hover fieldset":{borderColor:"#FF69B4"},"&.Mui-focused fieldset":{borderColor:"#FFB6C1"}},"& .MuiInputLabel-root":{color:"#FFB6C1"},"& .MuiInputLabel-root.Mui-focused":{color:"#FFB6C1"}}})}),t.jsx(o,{sx:{flex:1},children:t.jsx(r,{fullWidth:!0,label:"Cluster Name",value:e.cluster,onChange:e=>i("cluster",e.target.value),placeholder:"Your cluster name",variant:"outlined",required:!0,sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#FFD700"},"&:hover fieldset":{borderColor:"#FFA500"},"&.Mui-focused fieldset":{borderColor:"#FFD700"}},"& .MuiInputLabel-root":{color:"#FFD700"},"& .MuiInputLabel-root.Mui-focused":{color:"#FFD700"}}})})]})]}),dr=({formData:e,showPassword:n,setShowPassword:a,onUrlChange:i})=>t.jsxs(o,{children:[t.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:3},children:[t.jsx(j,{sx:{fontSize:32,color:"primary.main",mr:2}}),t.jsx(s,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Enter MongoDB Connection URL"})]}),t.jsxs(o,{sx:{mb:4},children:[t.jsxs(o,{sx:{position:"relative",mb:2},children:[t.jsx(r,{fullWidth:!0,label:"MongoDB Connection URL",value:e.db_url,onChange:e=>i(e.target.value),placeholder:"mongodb+srv://<db_username>:<db_password>@<db_cluster>.mongodb.net",variant:"outlined",multiline:!0,rows:2,sx:{fontFamily:"monospace"},InputProps:{endAdornment:t.jsx(w,{position:"end",children:t.jsx(C,{onClick:()=>a(!n),sx:{color:"primary.main","&:hover":{backgroundColor:"rgba(108, 92, 231, 0.1)"}},children:n?t.jsx(S,{}):t.jsx(R,{})})})}}),!n&&e.db_url&&t.jsx(o,{sx:{position:"absolute",top:"8px",left:"8px",right:"68px",bottom:"8px",backgroundColor:"rgba(0, 0, 0, 0.15)",backdropFilter:"blur(12px)",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",zIndex:1},children:t.jsx(s,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.7)",fontStyle:"italic",textAlign:"center",px:2,fontWeight:400,textShadow:"0 1px 3px rgba(0, 0, 0, 0.8)"},children:"Password hidden - Click eye icon to reveal"})})]}),t.jsxs(s,{variant:"body2",color:"text.secondary",sx:{mt:1,fontStyle:"italic",fontSize:"0.9em"},children:[t.jsx("span",{style:{color:"#666666"},children:"Example: "}),"mongodb+srv://",t.jsx("span",{style:{color:"#87CEEB"},children:e.user||"<db_username>"}),":",t.jsx("span",{style:{color:"#FFB6C1"},children:e.pass&&n?e.pass:"<db_password>"}),"@",t.jsx("span",{style:{color:"#FFD700"},children:e.cluster||"<db_cluster>"}),".mongodb.net"]})]})]}),cr=({installUrl:e,formData:r,showPassword:n,onOpenInStremio:a,onCopyUrl:i,profiles:l=[],profile:d="admin",hasDbCreds:c=!0,setProfile:u,setProfiles:m})=>e?t.jsxs(o,{sx:{mb:4},children:[t.jsx(p,{sx:{mb:2}}),t.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx("img",{src:"/assets/stremio_symbol-MtOkJskX.png",alt:"Stremio",style:{width:32,height:32,marginRight:16}}),t.jsx(s,{variant:"h6",sx:{fontWeight:"bold",whiteSpace:"nowrap"},children:"Install to Stremio"})]}),t.jsxs(o,{sx:{mb:2,display:"flex",alignItems:"stretch",gap:2,flexWrap:"wrap"},children:[t.jsx(Zt,{profiles:l,profile:d,hasDbCreds:c,setProfile:u,setProfiles:m,label:"Profile",size:"medium",sx:{minWidth:220,"& .MuiOutlinedInput-root":{height:48,alignItems:"center","& fieldset":{borderColor:"#6c5ce7"},"&:hover fieldset":{borderColor:"#8b7ae6"},"&.Mui-focused fieldset":{borderColor:"#a29bfe"}},"& .MuiSelect-select":{display:"flex",alignItems:"center",paddingTop:"10px",paddingBottom:"10px"}}}),t.jsx(h,{variant:"contained",onClick:a,disabled:!e,startIcon:t.jsx(E,{sx:{color:"white"}}),sx:{px:3,py:1,borderRadius:"8px 0 0 8px",fontSize:"1rem",background:"linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%)","&:hover":{background:"linear-gradient(135deg, #5f3dc4 0%, #8b7ae6 100%)",transform:"translateY(-1px)",boxShadow:"0 4px 16px rgba(108, 92, 231, 0.3)"},transition:"all 0.3s ease",border:"none",minWidth:"auto",height:"56px"},children:"Open in Stremio"}),t.jsxs(o,{sx:{flex:1,display:"flex",alignItems:"center",border:"1px solid",borderColor:"#2d2d2d",borderLeft:"none",borderRadius:"0 8px 8px 0",px:2,height:"56px",overflow:"hidden","&:hover":{borderColor:"primary.main"}},children:[t.jsx(o,{sx:{flex:1,overflowX:"auto",overflowY:"hidden",whiteSpace:"nowrap",fontFamily:"monospace",fontSize:"0.95rem",userSelect:"text"},"aria-label":"Addon URL (manifest.json)",children:(()=>{try{const r=new URL(e),o=r.pathname.split("/").filter(Boolean),[a,s,i,l,...d]=o,c=n?s:"<db_password>",u=!!l&&"manifest.json"!==l&&"catalog"!==l&&"stream"!==l,h=d.length?"/"+d.join("/"):"";return t.jsxs(t.Fragment,{children:[t.jsxs("span",{children:[r.origin,"/"]}),t.jsx("span",{style:{color:"#87CEEB"},children:a}),t.jsx("span",{children:"/"}),t.jsx("span",{style:{color:"#FFB6C1"},children:c}),t.jsx("span",{children:"/"}),t.jsx("span",{style:{color:"#FFD700"},children:i}),u&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:"/"}),t.jsx("span",{style:{color:"#6c5ce7"},children:l})]}),t.jsx("span",{children:h})]})}catch{const o=n?e:e.replace(r.pass,"<db_password>");return t.jsx("span",{children:o})}})()}),t.jsx(k,{title:"Copy URL",children:t.jsx(C,{onClick:i,sx:{color:"#4caf50","&:hover":{backgroundColor:"rgba(76, 175, 80, 0.1)"}},children:t.jsx(F,{})})})]})]}),t.jsxs(I,{severity:"info",icon:t.jsx($,{}),sx:{mb:2,background:"rgba(33, 150, 243, 0.1)",border:"1px solid rgba(33, 150, 243, 0.3)","& .MuiAlert-icon":{color:"#2196f3"}},children:[t.jsxs(s,{variant:"body2",sx:{fontWeight:500,mb:1},children:["📱 ",t.jsx("strong",{children:"How to install in Stremio:"})]}),t.jsx(s,{variant:"body2",sx:{mb:1},children:"1. Copy the URL above (click the copy button)"}),t.jsxs(s,{variant:"body2",sx:{mb:1},children:["2. Go to ",t.jsx("a",{href:"https://web.stremio.com/#/addons",target:"_blank",rel:"noopener noreferrer",style:{color:"#2196f3",textDecoration:"underline"},children:"web.stremio.com/#/addons"})]}),t.jsxs(s,{variant:"body2",sx:{mb:1},children:["3. Click the ",t.jsx("strong",{children:'"+ Add addon"'})," button"]}),t.jsx(s,{variant:"body2",sx:{mb:1},children:"4. Paste the URL and click Install"}),t.jsx(s,{variant:"body2",children:"5. Your Stream Save addon is now active in Stremio!"})]})]}):null,ur=({onShowHelp:e,onUpdateCredentials:r,areCredentialsOriginal:n,isFormValid:a})=>t.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:4},children:[t.jsx(h,{variant:"outlined",startIcon:t.jsx(D,{}),onClick:e,sx:{borderRadius:2,px:4,py:1.5,borderWidth:2,"&:hover":{borderWidth:2,transform:"translateY(-2px)",boxShadow:"0 8px 32px rgba(108, 92, 231, 0.2)"},transition:"all 0.3s ease"},children:"Need Help?"}),t.jsx(h,{variant:"contained",onClick:r,disabled:!a,sx:{px:3,py:1,borderRadius:2,fontSize:"0.875rem",background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #1e88e5 100%)",transform:"translateY(-2px)",boxShadow:"0 8px 32px rgba(25, 118, 210, 0.3)"},"&:disabled":{background:"#2d2d2d",color:"#666"},transition:"all 0.3s ease"},children:n?"(Optional) Save Credentials":"(Optional) Update Credentials"})]}),hr=({open:e,onClose:r})=>t.jsxs(L,{open:e,onClose:r,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{background:"linear-gradient(135deg, #1a1a2e 0%, #2d2d2d 100%)",border:"1px solid #2d2d2d"}},children:[t.jsxs(M,{sx:{borderBottom:"1px solid #2d2d2d",pb:2,display:"flex",alignItems:"center",gap:1},children:[t.jsx(D,{sx:{color:"primary.main"}}),"MongoDB Setup Help"]}),t.jsxs(B,{sx:{pt:3},children:[t.jsx(s,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:"bold"},children:"How to get your MongoDB credentials:"}),t.jsxs(T,{sx:{"& .MuiListItem-root":{py:.5}},children:[t.jsx(P,{sx:{px:0},children:t.jsx(W,{primary:"1. Go to MongoDB Atlas",secondary:t.jsx(A,{href:"https://cloud.mongodb.com",target:"_blank",rel:"noopener noreferrer",sx:{color:"primary.light"},children:"https://cloud.mongodb.com"})})}),t.jsx(P,{sx:{px:0},children:t.jsx(W,{primary:"2. Create a new cluster or use an existing one"})}),t.jsx(P,{sx:{px:0},children:t.jsx(W,{primary:"3. Create a database user with read/write permissions"})}),t.jsx(P,{sx:{px:0},children:t.jsx(W,{primary:"4. Get your connection string from the cluster"})}),t.jsx(P,{sx:{px:0},children:t.jsx(W,{primary:"5. Use either the connection string or enter credentials separately"})})]}),t.jsxs(o,{sx:{mt:3,p:2,bgcolor:"rgba(25, 118, 210, 0.1)",borderRadius:2,border:"1px solid rgba(25, 118, 210, 0.2)"},children:[t.jsx(s,{variant:"body2",sx:{fontWeight:"bold",color:"primary.main",mb:1},children:"⚠️ Important Note:"}),t.jsxs(s,{variant:"body2",color:"text.secondary",children:["The installation link is needed to add this addon to Stremio. ",t.jsx("strong",{children:"Even if you update your credentials, you must re-copy the link and save that new one to Stremio."})]})]}),t.jsx(p,{sx:{my:2}}),t.jsx(s,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:"bold"},children:"Input Options:"}),t.jsxs(T,{children:[t.jsx(P,{sx:{px:0},children:t.jsx(W,{primary:"Individual Fields",secondary:"Enter username, password, and cluster name separately. The connection URL will be generated automatically. Each field is color-coded to match the URL parts."})}),t.jsx(P,{sx:{px:0},children:t.jsx(W,{primary:"Connection URL",secondary:"Paste your full MongoDB connection string. The individual fields will be parsed automatically. The URL is color-coded to show which parts correspond to each field."})})]})]}),t.jsx(O,{sx:{p:3,pt:1},children:t.jsx(h,{onClick:r,variant:"outlined",sx:{borderRadius:2},children:"Close"})})]}),pr=({open:e,message:r,onClose:n})=>t.jsx(_,{open:e,onClose:n,autoHideDuration:2e3,message:r}),mr=({mongoDBCred:r,setMongoDBCred:n,profiles:o,profile:a,setProfile:s,setProfiles:i})=>{const[d,c]=e.useState({user:r.user||"",pass:r.pass||"",cluster:r.cluster||"",db_url:ar(r)}),[u,h]=e.useState(!1),[p,m]=e.useState(!1),[x,f]=e.useState(""),[y,v]=e.useState(!1),j=e.useMemo(()=>{if(d.user&&d.pass&&d.cluster){const e=window.location.origin,t=(a||"").trim();return t?`${e}/${d.user}/${d.pass}/${d.cluster}/${t}/manifest.json`:`${e}/${d.user}/${d.pass}/${d.cluster}/manifest.json`}return""},[d.user,d.pass,d.cluster,a]);e.useEffect(()=>{c({user:r.user||"",pass:r.pass||"",cluster:r.cluster||"",db_url:r.user&&r.pass&&r.cluster?ar(r):""});const e=r.user&&r.pass&&r.cluster?ar(r):"";e&&localStorage.setItem("db_url",e)},[r]),e.useEffect(()=>{const e=new URLSearchParams(window.location.search),t=e.get("user"),r=e.get("pass"),o=e.get("cluster");if((t||r||o)&&console.debug("[configure] query params",{user:t||"",pass_len:(r||"").length,cluster:o||""}),t||r||o){const e=t||"",a=r||"",s=o||"",i=sr(e,a,s);c({user:e,pass:a,cluster:s,db_url:i}),n({user:e,pass:a,cluster:s})}},[]);const w=()=>!r.user&&!r.pass&&!r.cluster;return t.jsxs(l,{maxWidth:"lg",sx:{py:4},children:[t.jsx(ir,{}),t.jsx(g,{elevation:0,sx:{background:"linear-gradient(135deg, #1a1a2e 0%, #2d2d2d 100%)",border:"1px solid #2d2d2d",borderRadius:3},children:t.jsxs(b,{sx:{p:4},children:[t.jsx(lr,{formData:d,showPassword:p,setShowPassword:m,onFieldChange:(e,t)=>{const r={...d,[e]:t},n=sr(r.user,r.pass,r.cluster);c({...r,db_url:n}),n&&localStorage.setItem("db_url",n)},profiles:o,profile:a}),t.jsx(dr,{formData:d,showPassword:p,setShowPassword:m,onUrlChange:e=>{if(c(t=>({...t,db_url:e})),e&&e.includes("mongodb+srv://")){const t=(e=>{try{const t=e.match(/mongodb\+srv:\/\/([^:]+):([^@]+)@([^.]+)/);return t?{user:t[1],pass:t[2],cluster:t[3]}:{user:"",pass:"",cluster:""}}catch{return{user:"",pass:"",cluster:""}}})(e);c(r=>({...r,user:t.user,pass:t.pass,cluster:t.cluster,db_url:e})),n({user:t.user,pass:t.pass,cluster:t.cluster}),localStorage.setItem("db_url",e)}}}),t.jsx(cr,{installUrl:j,formData:d,showPassword:p,onOpenInStremio:()=>{if(d.user&&d.pass&&d.cluster){const e=(a||"").trim(),t=e?`stremio://${window.location.host}/${d.user}/${d.pass}/${d.cluster}/${e}/manifest.json`:`stremio://${window.location.host}/${d.user}/${d.pass}/${d.cluster}/manifest.json`;f("Opening in Stremio..."),v(!0),setTimeout(()=>v(!1),2e3),window.location.href=t}},onCopyUrl:async()=>{if(j)try{await navigator.clipboard.writeText(j),f("Installation URL copied"),v(!0),setTimeout(()=>v(!1),2e3)}catch(e){console.error("Failed to copy:",e)}},profiles:o,profile:a,hasDbCreds:!!d.db_url,setProfile:s,setProfiles:i}),t.jsx(ur,{onShowHelp:()=>h(!0),onUpdateCredentials:()=>{n({user:d.user,pass:d.pass,cluster:d.cluster});const e=w()?"Credentials have been saved":"Credentials have been updated";d.db_url&&localStorage.setItem("db_url",d.db_url),f(e),v(!0),setTimeout(()=>v(!1),2e3)},areCredentialsOriginal:w(),isFormValid:!!(d.user&&d.pass&&d.cluster)})]})}),t.jsx(hr,{open:u,onClose:()=>h(!1)}),t.jsx(pr,{open:y,message:x,onClose:()=>v(!1)})]})},xr=()=>t.jsx(l,{maxWidth:"lg",sx:{mt:4,mb:4},children:t.jsxs(o,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"400px",children:[t.jsx(U,{size:60,sx:{color:"primary.main"}}),t.jsx(s,{variant:"h6",sx:{mt:2,color:"text.secondary"},children:"Loading your content..."})]})}),fr=({error:e})=>t.jsx(l,{maxWidth:"lg",sx:{mt:4,mb:4},children:t.jsxs(I,{severity:"warning",sx:{textAlign:"center",background:"linear-gradient(135deg, #1a1a2e 0%, #2d2d2d 100%)",border:"1px solid #2d2d2d"},children:[t.jsx(N,{children:"Configuration Required"}),e,t.jsx(o,{sx:{mt:2},children:t.jsx(h,{variant:"contained",href:"/configure",sx:{borderRadius:2},children:"Go to Configuration"})})]})}),gr=()=>t.jsxs(o,{mb:4,children:[t.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(R,{sx:{fontSize:48,color:"primary.main",mr:2}}),t.jsx(s,{variant:"h3",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold",background:"linear-gradient(45deg, #6c5ce7 30%, #a29bfe 90%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Manage Content"})]}),t.jsx(s,{variant:"h6",color:"text.secondary",children:"Browse and manage your saved stream links"})]}),br=u.memo(({stats:e})=>{const r=e.total>0?(e.movies/e.total*100).toFixed(1):0,n=e.total>0?(e.series/e.total*100).toFixed(1):0,a=[{title:"Total Content",value:e.total,icon:t.jsx(y,{sx:{fontSize:40,color:"primary.main"}}),color:"primary.main",subtitle:"All saved items"},{title:"Movies",value:e.movies,icon:t.jsx(z,{sx:{fontSize:40,color:"secondary.main"}}),color:"secondary.main",subtitle:`${r}% of total`},{title:"Series",value:e.series,icon:t.jsx(H,{sx:{fontSize:40,color:"success.main"}}),color:"success.main",subtitle:`${n}% of total`},{title:"Currently Showing",value:e.showing,icon:t.jsx(Y,{sx:{fontSize:40,color:"warning.main"}}),color:"warning.main",subtitle:"Filtered results"}];return t.jsx(o,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(4, 1fr)"},gap:3,mb:3},children:a.map((e,r)=>t.jsx(g,{elevation:2,sx:{height:"100%",transition:"transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:4}},children:t.jsxs(b,{sx:{textAlign:"center",p:3},children:[t.jsx(o,{sx:{mb:2},children:e.icon}),t.jsx(s,{variant:"h4",component:"div",sx:{fontWeight:"bold",color:e.color,mb:1},children:e.value}),t.jsx(s,{variant:"h6",component:"div",sx:{fontWeight:500,mb:1},children:e.title}),t.jsx(s,{variant:"body2",color:"text.secondary",children:e.subtitle})]})},r))})});br.displayName="StatsCards";const yr=u.memo(({searchTerm:a,filterType:s,onSearch:i,onFilter:l})=>{const d=e.useCallback(e=>{i(e.target.value)},[i]),u=e.useCallback(e=>{l(e.target.value)},[l]);return t.jsxs(o,{sx:{mb:3},children:[t.jsxs(o,{sx:{display:"flex",gap:2,mb:2,flexWrap:"wrap"},children:[t.jsx(r,{label:"Search content...",value:a,onChange:d,size:"small",sx:{minWidth:250,flexGrow:1},placeholder:"Search by title, description, or ID..."}),t.jsxs(J,{size:"small",sx:{minWidth:150},children:[t.jsx(G,{children:"Type"}),t.jsxs(q,{value:s,onChange:u,input:t.jsx(K,{label:"Type"}),children:[t.jsx(n,{value:"all",children:"All Types"}),["movie","series"].map(e=>t.jsx(n,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]})]})]}),t.jsxs(o,{sx:{display:"flex",gap:1,alignItems:"center",flexWrap:"wrap"},children:[a&&t.jsx(c,{label:`Search: "${a}"`,color:"secondary",variant:"outlined",size:"small",onDelete:()=>i("")}),s&&"all"!==s&&t.jsx(c,{label:`Type: ${s}`,color:"info",variant:"outlined",size:"small",onDelete:()=>l("all")})]})]})});yr.displayName="SearchAndFilter";const vr=u.memo(({filteredContent:r,profile:n,onRemoveContent:o,onEditContent:a})=>{const s=e.useMemo(()=>[...r].sort((e,t)=>e.type!==t.type?e.type.localeCompare(t.type):(e.name||"").localeCompare(t.name||"")),[r]),i=e.useMemo(()=>{const e=(n||"").trim();return e&&"admin"!==e.toLowerCase()?s.filter(t=>(t.owner||"")===e):s},[s,n]),l=e.useMemo(()=>({movies:i.filter(e=>"movie"===e.type).length,series:i.filter(e=>"series"===e.type).length,total:i.length}),[i]);return 0===i.length?t.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},children:[t.jsx("p",{children:"No content found. Add some movies or series to get started!"}),t.jsx("p",{children:t.jsxs("small",{children:["Movies: ",l.movies," | Series: ",l.series]})})]}):t.jsxs("div",{children:[t.jsxs("div",{style:{marginBottom:"1rem",display:"flex",gap:"1rem",alignItems:"center"},children:[t.jsx(c,{label:`Movies: ${l.movies}`,color:"primary",variant:"outlined"}),t.jsx(c,{label:`Series: ${l.series}`,color:"secondary",variant:"outlined"}),t.jsx(c,{label:`Total: ${l.total}`,color:"default",variant:"outlined"})]}),t.jsx(V,{component:X,elevation:2,children:t.jsxs(Q,{children:[t.jsx(Z,{children:t.jsxs(ee,{children:[t.jsx(te,{children:"Type"}),t.jsx(te,{children:"Title"}),t.jsx(te,{children:"Year"}),t.jsx(te,{children:"Rating"}),t.jsx(te,{children:"Owner"}),t.jsx(te,{align:"center",children:"Actions"})]})}),t.jsx(re,{children:i.map(e=>t.jsxs(ee,{hover:!0,children:[t.jsx(te,{children:t.jsx(c,{label:e.type,color:"movie"===e.type?"primary":"secondary",size:"small"})}),t.jsx(te,{children:t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:500},children:e.name}),e.description&&t.jsx("div",{style:{fontSize:"0.875rem",color:"#666",marginTop:"0.25rem"},children:e.description.length>100?`${e.description.substring(0,100)}...`:e.description})]})}),t.jsx(te,{children:e.releaseInfo||"N/A"}),t.jsx(te,{children:e.imdbRating||"N/A"}),t.jsx(te,{children:e.owner||"—"}),t.jsxs(te,{align:"center",children:[t.jsx(k,{title:"Edit",children:t.jsx(C,{onClick:()=>a(e),size:"small",color:"primary",children:t.jsx(x,{})})}),t.jsx(k,{title:"Remove",children:t.jsx(C,{onClick:()=>o(e.id,e.type),size:"small",color:"error",children:t.jsx(ne,{})})})]})]},`${e.type}-${e.id}`))})]})})]})});vr.displayName="ContentTable";const jr=({onClick:e})=>t.jsx(o,{sx:{display:"flex",justifyContent:"flex-end",mb:3},children:t.jsx(h,{variant:"contained",startIcon:t.jsx(a,{}),onClick:e,sx:{borderRadius:2,background:"linear-gradient(45deg, #2E7D32 30%, #388E3C 90%)","&:hover":{background:"linear-gradient(45deg, #1B5E20 30%, #2E7D32 90%)",transform:"translateY(-1px)",boxShadow:"0 4px 20px rgba(46, 125, 50, 0.3)"},transition:"all 0.3s ease"},children:"Add Saved Stream Link"})}),wr=({formData:e,addingContent:i,onFormChange:l,onSubmit:d,onCancel:c})=>{const u={"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#2d2d2d"},"&:hover fieldset":{borderColor:"primary.main"},"&.Mui-focused fieldset":{borderColor:"primary.main"}},"& .MuiFormHelperText-root":{color:"text.secondary",fontSize:"0.75rem"}};return t.jsxs(o,{component:"form",sx:{mt:2},children:[t.jsx(s,{variant:"h6",sx:{color:"primary.main",mb:2,fontWeight:"bold"},children:"Required Information"}),t.jsxs(o,{sx:{p:2,mb:3,bgcolor:"rgba(25, 118, 210, 0.1)",borderRadius:2,border:"1px solid rgba(25, 118, 210, 0.2)"},children:[t.jsxs(s,{variant:"subtitle2",sx:{color:"primary.main",fontWeight:"bold",mb:1,display:"flex",alignItems:"center",gap:1},children:[t.jsx($,{sx:{fontSize:20}}),"Important Notes:"]}),t.jsxs(o,{component:"ul",sx:{m:0,pl:2},children:[t.jsx(s,{component:"li",variant:"body2",color:"text.secondary",sx:{mb:.5},children:"Stream links can be magnet links, direct URLs, or YouTube links"}),"movie"===e.type&&t.jsxs(s,{component:"li",variant:"body2",color:"text.secondary",sx:{mb:.5},children:["For movies, use the IMDB ID (e.g., ",t.jsx("code",{style:{color:"primary.light",fontFamily:"monospace"},children:"tt0468569"})," for The Dark Knight)"]}),"series"===e.type&&t.jsxs(t.Fragment,{children:[t.jsxs(s,{component:"li",variant:"body2",color:"text.secondary",sx:{mb:.5},children:["For entire series, use the IMDB ID (e.g., ",t.jsx("code",{style:{color:"primary.light",fontFamily:"monospace"},children:"tt0944947"})," for Game of Thrones)"]}),t.jsxs(s,{component:"li",variant:"body2",color:"text.secondary",sx:{mb:.5},children:["For single episodes, use format: ",t.jsx("code",{style:{color:"primary.light",fontFamily:"monospace"},children:"imdbid:season:episode"})," (e.g., ",t.jsx("code",{style:{color:"primary.light",fontFamily:"monospace"},children:"tt0944947:1:8"})," for GoT S1E8)"]})]})]})]}),t.jsxs(o,{sx:{display:"flex",gap:2,mb:3},children:[t.jsxs(r,{select:!0,fullWidth:!0,label:"Content Type",value:e.type,onChange:e=>l("type",e.target.value),sx:u,children:[t.jsx(n,{value:"movie",children:"Movie"}),t.jsx(n,{value:"series",children:"Series"})]}),t.jsx(r,{fullWidth:!0,label:"IMDB ID *",value:e.imdbId,onChange:e=>l("imdbId",e.target.value),placeholder:"tt1234567 or paste IMDb URL",helperText:"Enter the IMDB ID (e.g., tt1234567) or paste an IMDb URL to auto-extract the ID",sx:u})]}),t.jsx(r,{fullWidth:!0,label:"Stream Link *",value:e.streamLink,onChange:e=>l("streamLink",e.target.value),placeholder:"magnet:?xt=urn:btih:... or http://...",multiline:!0,rows:3,helperText:"Enter the magnet link, torrent file, or direct stream URL",sx:{mb:3,...u}}),t.jsxs(o,{sx:{p:2,mb:4,bgcolor:"rgba(0, 191, 174, 0.1)",borderRadius:2,border:"1px solid rgba(0, 191, 174, 0.2)"},children:[t.jsx(s,{variant:"subtitle2",sx:{color:"#00BFAE",fontWeight:"bold",mb:1},children:"Supported Stream Link Formats:"}),t.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[t.jsxs(s,{variant:"body2",color:"text.secondary",children:["• ",t.jsx("strong",{children:"Magnet links:"})," ",t.jsx("code",{style:{color:"#00BFAE",fontFamily:"monospace"},children:"magnet:?xt=urn:btih:..."})]}),t.jsxs(s,{variant:"body2",color:"text.secondary",children:["• ",t.jsx("strong",{children:"Direct URLs:"})," ",t.jsx("code",{style:{color:"#00BFAE",fontFamily:"monospace"},children:"https://example.com/video.mp4"})]}),t.jsxs(s,{variant:"body2",color:"text.secondary",children:["• ",t.jsx("strong",{children:"YouTube:"})," ",t.jsx("code",{style:{color:"#00BFAE",fontFamily:"monospace"},children:"https://youtube.com/watch?v=..."})]})]})]}),t.jsxs(oe,{elevation:0,sx:{background:"transparent",border:"1px solid #2d2d2d",borderRadius:2,mb:4,"&:before":{display:"none"},"& .MuiAccordionSummary-root":{backgroundColor:"rgba(108, 92, 231, 0.05)",borderRadius:"8px 8px 0 0"},"& .MuiAccordionDetails-root":{backgroundColor:"rgba(0, 0, 0, 0.1)",borderRadius:"0 0 8px 8px",pt:3}},children:[t.jsxs(ae,{expandIcon:t.jsx(se,{sx:{color:"text.secondary"}}),sx:{"& .MuiAccordionSummary-content":{alignItems:"center",gap:1}},children:[t.jsx(s,{variant:"h6",sx:{color:"text.secondary",fontWeight:"bold"},children:"Optional Overrides"}),t.jsx(s,{variant:"body2",sx:{color:"text.secondary",fontSize:"0.875rem"},children:"(Advanced configuration)"})]}),t.jsxs(ie,{children:[t.jsx(s,{variant:"body2",sx:{color:"text.secondary",mb:3,fontStyle:"italic"},children:"These fields will override the data fetched from IMDB if provided"}),t.jsx(r,{fullWidth:!0,label:"Title",value:e.title,onChange:e=>l("title",e.target.value),placeholder:"Enter custom title (optional)",helperText:"Leave empty to use IMDB title",sx:{mb:3,...u}}),t.jsx(r,{fullWidth:!0,label:"Description",value:e.description,onChange:e=>l("description",e.target.value),placeholder:"Enter custom description (optional)",helperText:"Leave empty to use IMDB description",multiline:!0,rows:2,sx:{mb:3,...u}}),t.jsx(r,{fullWidth:!0,label:"Poster URL",value:e.poster,onChange:e=>l("poster",e.target.value),placeholder:"http://example.com/poster.jpg",helperText:"Enter custom poster image URL (optional)",sx:{mb:3,...u}})]})]}),t.jsxs(o,{sx:{display:"flex",gap:2,justifyContent:"flex-end"},children:[t.jsx(h,{variant:"outlined",onClick:c,disabled:i,sx:{borderRadius:2},children:"Cancel"}),t.jsx(h,{variant:"contained",onClick:d,disabled:!e.imdbId||!e.streamLink||i,startIcon:i?t.jsx(U,{size:16}):t.jsx(a,{}),sx:{borderRadius:2,background:"linear-gradient(45deg, #2E7D32 30%, #388E3C 90%)","&:hover":{background:"linear-gradient(45deg, #1B5E20 30%, #2E7D32 90%)",transform:"translateY(-1px)",boxShadow:"0 4px 20px rgba(46, 125, 50, 0.3)"},transition:"all 0.3s ease"},children:i?"Adding...":"Add Content"})]})]})},Cr=({showAddForm:e,formData:r,addingContent:n,onFormChange:a,onSubmit:i,onCancel:l})=>e?t.jsx(o,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",zIndex:1300,display:"flex",alignItems:"center",justifyContent:"center",p:2},onClick:l,children:t.jsx(g,{elevation:24,sx:{maxWidth:900,width:"100%",maxHeight:"90vh",overflow:"auto",background:"linear-gradient(135deg, #1a1a2e 0%, #2d2d2d 100%)",border:"1px solid #2d2d2d"},onClick:e=>e.stopPropagation(),children:t.jsxs(b,{sx:{p:3},children:[t.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[t.jsx(s,{variant:"h5",component:"h2",sx:{color:"primary.main",fontWeight:"bold"},children:"Add Saved Stream Link"}),t.jsx(C,{onClick:l,sx:{color:"text.secondary","&:hover":{color:"error.main"}},children:t.jsx(le,{})})]}),t.jsx(wr,{formData:r,addingContent:n,onFormChange:a,onSubmit:i,onCancel:l})]})})}):null,Sr=()=>localStorage.getItem("db_url")||"",Rr=e=>localStorage.getItem("profile")||localStorage.getItem("owner")||e||"",Er=({profile:n})=>{const[a,i]=e.useState([]),[d,c]=e.useState(!0),[u,p]=e.useState(""),[m,x]=e.useState(""),[f,g]=e.useState("all"),[b,y]=e.useState(!1),{formData:v,handleFormChange:j,resetForm:w}=(()=>{const[t,r]=e.useState({type:"movie",imdbId:"",streamLink:"",title:"",description:"",poster:""});return{formData:t,setFormData:r,handleFormChange:(e,t)=>{if("imdbId"===e){const n=/https?:\/\/(?:www\.)?imdb\.com\/title\/(tt\d+)/i,o=t.match(n);if(o){const t=o[1];return void r(r=>({...r,[e]:t}))}}r(r=>({...r,[e]:t}))},resetForm:()=>{r({type:"movie",imdbId:"",streamLink:"",title:"",description:"",poster:""})}}})(),[C,S]=e.useState(!1),[R,E]=e.useState(!1),[k,F]=e.useState(""),[$,D]=e.useState("info"),[T,P]=e.useState(!1),[W,A]=e.useState(null),[U,N]=e.useState(""),[z,H]=e.useState(""),[Y,J]=e.useState(""),[G,q]=e.useState(""),[K,V]=e.useState(""),[X,Q]=e.useState(""),[Z,ee]=e.useState(!1),te={"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#2d2d2d"},"&:hover fieldset":{borderColor:"primary.main"},"&.Mui-focused fieldset":{borderColor:"primary.main"}},"& .MuiFormHelperText-root":{color:"text.secondary",fontSize:"0.75rem"}},re=e.useCallback((e,t="info")=>{F(e),D(t),E(!0)},[]),ne=e.useCallback(async()=>{const e=new AbortController;try{c(!0),p("");const t=Sr();if(!t)return p("Database URL missing. Please configure credentials."),void i([]);const r=await fetch("/api/content",{headers:{"x-db-url":t,"x-owner":Rr(n)},signal:e.signal});if(!r.ok){const e=await r.text();throw new Error(`${r.status}: ${e}`)}const o=await r.json();i(Array.isArray(o.content)?o.content:[])}catch(t){if("AbortError"===t?.name)return;p(t instanceof Error?t.message:"Failed to fetch content")}finally{c(!1)}},[n]),oe=e.useCallback(e=>{x(e)},[]),ae=e.useCallback(e=>{g(e)},[]),se=e.useMemo(()=>{let e=a;if("all"!==f&&(e=e.filter(e=>e.type===f)),m){const t=m.toLowerCase();e=e.filter(e=>(e.name||"").toLowerCase().includes(t)||(e.id||"").toLowerCase().includes(t)||(e.owner||"").toLowerCase().includes(t))}return e},[a,m,f]),ie=e.useMemo(()=>(e=>({total:e.length,movies:e.filter(e=>"movie"===e.type).length,series:e.filter(e=>"series"===e.type).length,showing:e.length}))(se),[se]),le=e.useCallback(async(e,t)=>{try{const r=Sr();if(!r)return void re("Database URL missing. Configure credentials first.","warning");const o=await fetch(`/api/content/${t}/${e}`,{method:"DELETE",headers:{"x-db-url":r,"x-owner":Rr(n)}});if(!o.ok){const e=await o.text();throw new Error(`${o.status}: ${e}`)}await ne(),re("Content removed successfully","success")}catch(r){re(r instanceof Error?r.message:"Failed to remove content","error")}},[ne,re,n]),ce=e.useCallback(async e=>{try{const t=Sr();if(!t)return void re("Database URL missing. Configure credentials first.","warning");if(A(e),H(e.name||""),J(e.description||""),q(e.poster||""),V(e.releaseInfo||""),Q(null===e.imdbRating||void 0===e.imdbRating?"":String(e.imdbRating)),N(""),P(!0),"movie"===e.type){const r=await fetch(`/api/content/${e.type}/${e.id}`,{headers:{"x-db-url":t,"x-owner":Rr(n)}});if(r.ok){const e=await r.json();N(e.stream||""),e.item&&(H(e.item.name||""),J(e.item.description||""),q(e.item.poster||""),V(e.item.releaseInfo||""),Q(null===e.item.imdbRating||void 0===e.item.imdbRating?"":String(e.item.imdbRating)))}}if("series"===e.type){const r=await fetch(`/api/content/${e.type}/${e.id}`,{headers:{"x-db-url":t,"x-owner":Rr(n)}});if(r.ok){const e=await r.json();e.item&&(H(e.item.name||""),J(e.item.description||""),q(e.item.poster||""),V(e.item.releaseInfo||""),Q(null===e.item.imdbRating||void 0===e.item.imdbRating?"":String(e.item.imdbRating)))}}}catch(Ir){}},[re,n]),ue=e.useCallback(async()=>{if(W)try{ee(!0);const e=Sr();if(!e)return void re("Database URL missing. Configure credentials first.","warning");const t="string"==typeof X?X:String(X),r=""===t.trim()?null:isNaN(parseFloat(t))?t:parseFloat(t),o={name:z,description:Y,poster:G,releaseInfo:K,imdbRating:r};"movie"===W.type&&(o.stream=U);const a=await fetch(`/api/content/${W.type}/${W.id}`,{method:"PUT",headers:{"Content-Type":"application/json","x-db-url":e,"x-owner":Rr(n)},body:JSON.stringify(o)});if(!a.ok){const e=await a.text();throw new Error(`${a.status}: ${e}`)}await ne(),P(!1),A(null),N(""),H(""),J(""),q(""),V(""),Q(""),re("Changes saved","success")}catch(Ir){re(Ir instanceof Error?Ir.message:"Failed to save changes","error")}finally{ee(!1)}},[W,U,ne,re,z,Y,G,K,X,n]),he=e.useCallback(async()=>{try{S(!0);const e=Sr();if(!e)return void re("Database URL missing. Configure credentials first.","warning");const t={type:v.type,imdbID:v.imdbId,stream:v.streamLink},r=await fetch("/api/content",{method:"POST",headers:{"Content-Type":"application/json","x-db-url":e,"x-owner":Rr(n)},body:JSON.stringify(t)});if(!r.ok){const e=await r.text();throw new Error(`${r.status}: ${e}`)}w(),y(!1),await ne(),re("Content added successfully!","success")}catch(e){re(e instanceof Error?e.message:"Failed to add content","error")}finally{S(!1)}},[v.type,v.imdbId,v.streamLink,ne,w,re,n]);return e.useEffect(()=>{ne()},[ne,n]),d?t.jsx(xr,{}):u?t.jsx(fr,{error:u}):t.jsxs(l,{maxWidth:"lg",sx:{mt:4,mb:4},children:[t.jsx(gr,{}),t.jsx(br,{stats:ie}),t.jsx(yr,{searchTerm:m,filterType:f,onSearch:oe,onFilter:ae}),t.jsx(jr,{onClick:()=>y(!0)}),t.jsx(vr,{content:a,filteredContent:se,profile:n,onRemoveContent:le,onEditContent:ce}),t.jsx(Cr,{showAddForm:b,formData:v,addingContent:C,onFormChange:j,onSubmit:he,onCancel:()=>{w(),y(!1)}}),t.jsx(_,{open:R,autoHideDuration:2500,onClose:()=>E(!1),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:t.jsx(I,{severity:$,onClose:()=>E(!1),sx:{width:"100%"},children:k})}),t.jsxs(L,{open:T,onClose:()=>P(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{background:"linear-gradient(135deg, #1a1a2e 0%, #2d2d2d 100%)",border:"1px solid #2d2d2d"}},children:[t.jsx(M,{sx:{color:"primary.main",fontWeight:"bold"},children:"Edit Content"}),t.jsx(B,{children:t.jsxs(de,{spacing:2,sx:{mt:1},children:[t.jsx(o,{sx:{p:1.5,border:"1px dashed #2d2d2d",borderRadius:1,bgcolor:"rgba(108, 92, 231, 0.05)"},children:t.jsx(s,{variant:"body2",color:"text.secondary",children:"Note: The first two fields are not editable."})}),t.jsx(r,{label:"Type",value:W?.type||"",InputProps:{readOnly:!0},fullWidth:!0,sx:te,helperText:"Not editable"}),t.jsx(r,{label:"IMDb ID",value:W?.id||"",InputProps:{readOnly:!0},fullWidth:!0,sx:te,helperText:"Not editable"}),t.jsx(r,{label:"Title",value:z,onChange:e=>H(e.target.value),fullWidth:!0,sx:te}),t.jsx(r,{label:"Description",value:Y,onChange:e=>J(e.target.value),fullWidth:!0,multiline:!0,minRows:3,sx:te}),t.jsx(r,{label:"Poster URL",value:G,onChange:e=>q(e.target.value),fullWidth:!0,sx:te}),t.jsxs(de,{direction:"row",spacing:2,children:[t.jsx(r,{label:"Release Info",value:K,onChange:e=>V(e.target.value),fullWidth:!0,sx:te}),t.jsx(r,{label:"IMDb Rating",value:X,onChange:e=>Q(e.target.value),fullWidth:!0,sx:te})]}),"movie"===W?.type&&t.jsx(r,{label:"Stream URL",value:U,onChange:e=>N(e.target.value),placeholder:"https://...",fullWidth:!0,sx:te})]})}),t.jsxs(O,{children:[t.jsx(h,{onClick:()=>P(!1),sx:{borderRadius:2},children:"Cancel"}),t.jsx(h,{onClick:ue,variant:"contained",disabled:Z,sx:{borderRadius:2},children:Z?"Saving...":"Save"})]})]})]})};function kr(){const[r,n]=e.useState({user:null,pass:null,cluster:null}),[o,a]=e.useState(!1),[s,i]=e.useState(["admin"]),[l,d]=e.useState("admin"),[c,u]=e.useState(()=>Boolean(localStorage.getItem("db_url")));e.useEffect(()=>{const e=new URLSearchParams(window.location.search),t=e.get("user"),r=e.get("pass"),o=e.get("cluster");n({user:t||"cf210db7-ebe2-4651-ae20-a5bf95840bd8",pass:r||"a02752c7-f4f4-4905-af00-d7f6dd9f1054",cluster:o||"stremio-save-db1ed977-c.ms2wsj7"}),a(Boolean(t&&r&&o))},[]),e.useEffect(()=>{try{const e=localStorage.getItem("profile");e&&d(e)}catch{}},[]),e.useEffect(()=>{const e=()=>{try{u(Boolean(localStorage.getItem("db_url")))}catch{}};return window.addEventListener("storage",e),e(),()=>{window.removeEventListener("storage",e)}},[]),e.useEffect(()=>{const e=new AbortController;return async function(){try{const t=localStorage.getItem("db_url");if(!t)return void i(["admin"]);const r=await fetch("/api/owners",{headers:{"x-db-url":t},signal:e.signal});if(!r.ok)throw new Error("owners failed");const n=await r.json(),o=Array.isArray(n.owners)&&n.owners.length?n.owners:["admin"];i(e=>Array.from(new Set([...e||[],...o,l].filter(Boolean))))}catch{i(()=>{const e=["admin"];return l&&!e.includes(l)?[l,...e]:e})}}(),()=>{e.abort()}},[]);const h=e.useMemo(()=>r.user&&r.pass&&r.cluster,[r]),p=()=>{const e=ot();window.__ROUTE_HISTORY__=window.__ROUTE_HISTORY__||[];const t=window.__ROUTE_HISTORY__,r=`${e.pathname}${e.search}`;if(t[t.length-1]!==r){t.push(r),t.length>20&&t.shift();const e=e=>e.replace(/(passw?|password)=([^&]+)/gi,"$1=***");console.log("[route] hit",e(r),"| recent:",t.slice(-5).map(e))}return null};return h||o?t.jsxs(zt,{children:[t.jsx(p,{}),t.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[t.jsx(er,{profiles:s,profile:l,hasDbCreds:c,setProfile:d,setProfiles:i}),t.jsx("div",{style:{flexGrow:1,padding:"16px"},children:t.jsxs(jt,{children:[t.jsx(yt,{path:"/configure",element:o?(a(!1),t.jsx(bt,{to:"/manage",replace:!0})):t.jsx(mr,{mongoDBCred:r,setMongoDBCred:n,profiles:s,profile:l,setProfile:d,setProfiles:i})}),t.jsx(yt,{path:"/manage",element:t.jsx(Er,{profile:l,profiles:s})}),t.jsx(yt,{path:"/",element:h?t.jsx(or,{}):t.jsx(bt,{to:"/configure",replace:!0})}),t.jsx(yt,{path:"*",element:h?t.jsx(or,{}):t.jsx(bt,{to:"/configure",replace:!0})})]})})]})]}):t.jsxs(zt,{children:[t.jsx(p,{}),t.jsx(mr,{mongoDBCred:r,setMongoDBCred:n,profiles:s,profile:l,setProfile:d,setProfiles:i})]})}const Fr=ce({palette:{mode:"dark",primary:{main:"#6c5ce7",light:"#a29bfe",dark:"#5f3dc4",contrastText:"#ffffff"},secondary:{main:"#fd79a8",light:"#fdcb6e",dark:"#e84393",contrastText:"#ffffff"},background:{default:"#0f0f23",paper:"#1a1a2e"},text:{primary:"#ffffff",secondary:"#b3b3b3"},divider:"#2d2d2d"},typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',h1:{fontWeight:600},h2:{fontWeight:600},h3:{fontWeight:600},h4:{fontWeight:600},h5:{fontWeight:600},h6:{fontWeight:600}},shape:{borderRadius:12},components:{MuiCard:{styleOverrides:{root:{backgroundImage:"none",backgroundColor:"#1a1a2e",border:"1px solid #2d2d2d"}}},MuiButton:{styleOverrides:{root:{textTransform:"none",fontWeight:600}}},MuiAppBar:{styleOverrides:{root:{backgroundImage:"none",backgroundColor:"#1a1a2e",borderBottom:"none"}}}}});ge.createRoot(document.getElementById("root")).render(t.jsxs(ue,{theme:Fr,children:[t.jsx(he,{}),t.jsx(kr,{})]}));
//# sourceMappingURL=index-BNSEAyk1.js.map
